---
title: "Problem Set 2"
author: "Westley Cook"
date: "2/11/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(fivethirtyeight)
library(lintr)

# Loading the tidyverse and fivethirtyeight packages because the pset said
# I would need them. Loading lintr because the tidyverse style guide said it
# would perform automated checks to make sure I was conforming to the style
# guide, and I anticipate needing help to not lose points on style issues
# since I've never done this before.

```


```{r exploring_data, include = FALSE}

# glimpse(x)

# Trying to get a sense for what this dataframe looks like.

# summary(x)

# Trying another approach to see what the dataframe looks like

```


## Mad Libs

```{r madlib_1, include=FALSE}

# Will use this r chunk to set up a variable for mad lib 1 to make plugging
# into r insert easy and to make this code more readable.

endorsements_2020

# Renaming endorsements_2020 as x so it's easier to call as I work on the
# rest of the pset.

first_date <- endorsements_2020 %>% 
                arrange(date) %>% 
                slice(1) %>% 
                pull(date)

# Ran the arrange() command and figured out what the date was, and then labored
# over it for a long time before I asked for help and Evelyn told me about the
# slice() command I could use to isolate a single row of the dataframe.
# So I sliced it to keep just the first row, then pulled the value from the
# date column and named it first_date so I could slot it in nicely for
# the Mad Lib.

```

1. The earliest date for an endorsement in the dataset is **`r first_date`**.

```{r madlib_2, include = FALSE}

most_recent_date <- endorsements_2020 %>% 
                      arrange(desc(date)) %>% 
                      slice(1) %>% 
                      pull(date)

# Same process as for Mad Lib 1, but adding desc() to reverse the order and
# give me the most recent date instead of the oldest one.

```

2. The most recent date for an endorsement is **`r most_recent_date`**.

```{r madlib_3, include = FALSE}

mayor <- filter(endorsements_2020, 
        position == "mayor", 
        endorsee == "Pete Buttigieg") %>% 
  pull(endorser)

# Filtered first by position to narrow the data to only the mayors who have
# given endorsements. Then added the argument endorsee == "Pete Buttigieg"
# to isolate only the one mayor who endorsed him. Used pull() command
# to grab that mayor's name and assign it to the variable "mayor", which
# I then placed in an embedded r in mad lib 3.

```


3. **`r mayor`** is the mayor that has endorsed Pete Buttigieg.

```{r madlib_4, include = FALSE}

points_from_nh <- endorsements_2020 %>% 
                        filter(state == "NH") %>% 
                        pull(points)

nh_avg_points <- mean(points_from_nh)

# Set filter(state == "NH") to give just the NH rows, and the first thing I
# tried was to just pipe it into a mean() operation and name the result
# nh_avg_points. But the mean() operation didn't work, because the points
# date type is <dbl>, which apparently doesn't work with mean()... So instead,
# I pulled the points out and named that vector points_from_nh.

# I then used a separate operation to take the mean of the points and name it
# nh_avg_points.
                        

```

4. Endorsers from New Hampshire have an average of **`r nh_avg_points`** endorsement points.

```{r madlib_5, include = FALSE}

warren_klobuchar_points <- endorsements_2020 %>% 
                              filter(endorsee == "Amy Klobuchar" | 
                                       endorsee == "Elizabeth Warren") %>% 
                                  pull(points)

warren_klobuchar_points_total <- sum(warren_klobuchar_points)

# Very similar process to mad lib 4. I used the vertical bar in the filter()
# operation to filter for Klobuchar or Warren, then pulled the points
# and named them warren_klobuchar_points.

# I then used the sum() operation to take the total of those points and
# name it warren_klobuchar_points_total.



# A brief comment for mad lib 6:
# On each of the three parts of mad lib 6, I only needed one operation, so I
# chose to just include the operation in-line rather than using an r chunk to
# assign the value I wanted to a variable and insert that variable in-line.

```

5. Between them, the two female candidates who remain in the race (Amy Klobuchar and Elizabeth Warren) have a total of **`r warren_klobuchar_points_total`** endorsement points.

```{r madlib_6_note, include = FALSE}

position_class <- endorsements_2020 %>%
                    pull(position) %>%
                      class()

# Piping endorsements_2020 into pull() to isolate the position column as
# an object, then calling the class() function to name the class. Assigning
# the resulting value to a new variable called position_class, which I will
# insert in-line for the mad lib.

endorser_class <- endorsements_2020 %>% 
                    pull(endorser) %>% 
                      class()

# Same process as with part a, but with endorser (and with new variable 
# endorser_class) instead of with position.

points_class <- endorsements_2020 %>% 
                  pull(points) %>% 
                    class()

# Again, same process as with part a, but with points (and with new variable 
# points_class) instead of with position.

```

6a. The variable “position” is a **`r position_class`** class of variable.

6b. The variable “endorser” is a **`r endorser_class`** class of variable.

6c. The variable “points” is a **`r points_class`** class of variable.




## Graph Replication





### Worked with:
Owen Bernstein
- Lindsey Greenhill
- Katelyn Li

###### at Evelyn's Lowell Study Hall on Tuesday, February 11.